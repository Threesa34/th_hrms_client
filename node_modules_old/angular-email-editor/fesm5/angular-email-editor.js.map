{"version":3,"file":"angular-email-editor.js.map","sources":["ng://angular-email-editor/lib/email-editor.service.ts","ng://angular-email-editor/lib/loadScript.ts","ng://angular-email-editor/lib/email-editor.component.ts","ng://angular-email-editor/lib/email-editor.module.ts","ng://angular-email-editor/public_api.ts","ng://angular-email-editor/angular-email-editor.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EmailEditorService {\n\n  constructor() { }\n}\n","const scriptUrl = '//editor.unlayer.com/embed.js?2';\nconst callbacks = [];\nlet loaded = false;\n\nconst isScriptInjected = () => {\n  const scripts = document.querySelectorAll('script');\n  let injected = false;\n\n  scripts.forEach((script) => {\n    if (script.src.includes(scriptUrl)) {\n      injected = true;\n    }\n  });\n\n  return injected;\n};\n\nconst addCallback = (callback) => {\n  callbacks.push(callback);\n};\n\nconst runCallbacks = () => {\n  if (loaded) {\n    let callback;\n\n    while ((callback = callbacks.shift())) {\n      callback();\n    }\n  }\n};\n\nexport const loadScript = (callback) => {\n  addCallback(callback);\n\n  if (!isScriptInjected()) {\n    const embedScript = document.createElement('script');\n    embedScript.setAttribute('src', scriptUrl);\n    embedScript.onload = () => {\n      loaded = true;\n      runCallbacks();\n    };\n    document.head.appendChild(embedScript);\n  } else {\n    runCallbacks();\n  }\n};\n","import { Component, OnInit, AfterViewInit, Input, Output, EventEmitter } from '@angular/core';\nimport { loadScript } from './loadScript';\nimport pkg from './source.json';\n\ndeclare module unlayer {\n  function init(object);\n  function createEditor(object);\n  function loadDesign(object);\n  function saveDesign(Function);\n  function exportHtml(Function);\n}\n\nexport interface UnlayerOptions {\n  projectId?: number;\n  tools?: object;\n  appearance?: object;\n  locale?: string;\n}\n\nlet lastEditorId = 0;\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'email-editor',\n  templateUrl: './email-editor.component.html',\n  styleUrls: ['./email-editor.component.css']\n})\nexport class EmailEditorComponent implements OnInit, AfterViewInit {\n\n  @Input() editorId: string;\n  @Input() options: UnlayerOptions = {};\n  @Input() projectId: number;\n  @Input() tools: object;\n  @Input() appearance: object;\n  @Input() locale: string;\n\n  @Input() minHeight = '500px';\n\n  @Output() loaded = new EventEmitter();\n\n  editor: any;\n\n  constructor() {\n    this.editorId = `editor-${++lastEditorId}`;\n   }\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    loadScript(this.loadEditor.bind(this));\n  }\n\n  protected loadEditor() {\n    const options: UnlayerOptions = this.options || {};\n\n    if (this.projectId) {\n      options.projectId = this.projectId;\n    }\n\n    if (this.tools) {\n      options.tools = this.tools;\n    }\n\n    if (this.appearance) {\n      options.appearance = this.appearance;\n    }\n\n    if (this.locale) {\n      options.locale = this.locale;\n    }\n\n    this.editor = unlayer.createEditor({\n      ...options,\n      id: this.editorId,\n      displayMode: 'email',\n      source: {\n        name: pkg.name,\n        version: pkg.version,\n      },\n    });\n\n    this.loaded.emit({});\n  }\n\n  public loadDesign(data: object) {\n    this.editor.loadDesign(data);\n  }\n\n  public saveDesign(cb: (data: object) => void) {\n    this.editor.saveDesign(cb);\n  }\n\n  public exportHtml(cb: (data: object) => void) {\n    this.editor.exportHtml(cb);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { EmailEditorComponent } from './email-editor.component';\n\n@NgModule({\n  declarations: [EmailEditorComponent],\n  imports: [\n  ],\n  exports: [EmailEditorComponent]\n})\nexport class EmailEditorModule { }\n","/*\n * Public API Surface of email-editor\n */\n\nexport * from './lib/email-editor.service';\nexport * from './lib/email-editor.component';\nexport * from './lib/email-editor.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;IAOE;KAAiB;;gBALlB,UAAU,SAAC;oBACV,UAAU,EAAE,MAAM;iBACnB;;;;;6BAJD;CAEA;;ACFA,IAAM,SAAS,GAAG,iCAAiC,CAAC;AACpD,IAAM,SAAS,GAAG,EAAE,CAAC;AACrB,IAAI,MAAM,GAAG,KAAK,CAAC;AAEnB,IAAM,gBAAgB,GAAG;IACvB,IAAM,OAAO,GAAG,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IACpD,IAAI,QAAQ,GAAG,KAAK,CAAC;IAErB,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM;QACrB,IAAI,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;YAClC,QAAQ,GAAG,IAAI,CAAC;SACjB;KACF,CAAC,CAAC;IAEH,OAAO,QAAQ,CAAC;CACjB,CAAC;AAEF,IAAM,WAAW,GAAG,UAAC,QAAQ;IAC3B,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;CAC1B,CAAC;AAEF,IAAM,YAAY,GAAG;IACnB,IAAI,MAAM,EAAE;QACV,IAAI,QAAQ,SAAA,CAAC;QAEb,QAAQ,QAAQ,GAAG,SAAS,CAAC,KAAK,EAAE,GAAG;YACrC,QAAQ,EAAE,CAAC;SACZ;KACF;CACF,CAAC;AAEK,IAAM,UAAU,GAAG,UAAC,QAAQ;IACjC,WAAW,CAAC,QAAQ,CAAC,CAAC;IAEtB,IAAI,CAAC,gBAAgB,EAAE,EAAE;QACvB,IAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACrD,WAAW,CAAC,YAAY,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAC3C,WAAW,CAAC,MAAM,GAAG;YACnB,MAAM,GAAG,IAAI,CAAC;YACd,YAAY,EAAE,CAAC;SAChB,CAAC;QACF,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;KACxC;SAAM;QACL,YAAY,EAAE,CAAC;KAChB;CACF,CAAC;;;;;;;;;;;;;;AC1BF,IAAI,YAAY,GAAG,CAAC,CAAC;AAErB;IAqBE;QAZS,YAAO,GAAmB,EAAE,CAAC;QAM7B,cAAS,GAAG,OAAO,CAAC;QAEnB,WAAM,GAAG,IAAI,YAAY,EAAE,CAAC;QAKpC,IAAI,CAAC,QAAQ,GAAG,YAAU,EAAE,YAAc,CAAC;KAC3C;IAEF,uCAAQ,GAAR,eAAa;IAEb,8CAAe,GAAf;QACE,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;KACxC;IAES,yCAAU,GAApB;QACE,IAAM,OAAO,GAAmB,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC;QAEnD,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;SACpC;QAED,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;SAC5B;QAED,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;SACtC;QAED,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;SAC9B;QAED,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,YAAY,cAC7B,OAAO,IACV,EAAE,EAAE,IAAI,CAAC,QAAQ,EACjB,WAAW,EAAE,OAAO,EACpB,MAAM,EAAE;gBACN,IAAI,EAAE,GAAG,CAAC,IAAI;gBACd,OAAO,EAAE,GAAG,CAAC,OAAO;aACrB,IACD,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KACtB;IAEM,yCAAU,GAAjB,UAAkB,IAAY;QAC5B,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;KAC9B;IAEM,yCAAU,GAAjB,UAAkB,EAA0B;QAC1C,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;KAC5B;IAEM,yCAAU,GAAjB,UAAkB,EAA0B;QAC1C,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;KAC5B;;gBAzEF,SAAS,SAAC;;oBAET,QAAQ,EAAE,cAAc;oBACxB,mGAA4C;;iBAE7C;;;;;2BAGE,KAAK;0BACL,KAAK;4BACL,KAAK;wBACL,KAAK;6BACL,KAAK;yBACL,KAAK;4BAEL,KAAK;yBAEL,MAAM;;IA0DT,2BAAC;CA3ED;;;IClBA;KAMkC;;gBANjC,QAAQ,SAAC;oBACR,YAAY,EAAE,CAAC,oBAAoB,CAAC;oBACpC,OAAO,EAAE,EACR;oBACD,OAAO,EAAE,CAAC,oBAAoB,CAAC;iBAChC;;IACgC,wBAAC;CANlC;;ACHA;;GAEG;;ACFH;;GAEG;;;;"}
